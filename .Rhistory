which(sales_daily[,date] >= sale_current[,date] & sales_daily[,date] < sale_next[,date])
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=quantity_sold_kg,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
rows <- which(sales_daily[,date] >= sale_current[,date] & sales_daily[,date] < sale_next[,date])
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=quantity_sold_kg,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=2,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=2L,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
sales_daily <- data.table(date = seq(min(datatosmooth$date), max(datatosmooth$date)-1, by="days"),
quantity_sold_kg = NA)
sales_daily <- data.table(date = seq(min(datatosmooth$date), max(datatosmooth$date)-1, by="days"),
quantity_sold_kg = as.numeric(NA))
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=2L,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
View(sales_daily)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
for(i in 1:(nrow(datatosmooth)-1)){
sale_current <- datatosmooth[i,]
sale_next <- datatosmooth[i+1,]
period_length <- sale_next[,date] - sale_current[,date]
rows <- which(sales_daily[,date] >= sale_current[,date] & sales_daily[,date] < sale_next[,date])
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=2L,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
}
View(sales_daily)
plotsales(data.frame(id_pairs), "storeID", data.frame(sales_daily))
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
?smooth
sales_smooth
?sales_smooth
library(ggplot2)
ggplot(datatoplot, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
ggplot(sales_daily, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
ggplot(datatosmooth, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
id_pairs <- data.table(productID = "G01F05S01S01", storeID = 3123)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
sales_daily <- data.table(date = seq(min(datatosmooth$date), max(datatosmooth$date)-1, by="days"),
quantity_sold_kg = as.numeric(NA))
for(i in 1:(nrow(datatosmooth)-1)){
sale_current <- datatosmooth[i,]
sale_next <- datatosmooth[i+1,]
period_length <- sale_next[,date] - sale_current[,date]
rows <- which(sales_daily[,date] >= sale_current[,date] & sales_daily[,date] < sale_next[,date])
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=2L,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
}
ggplot(datatosmooth, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
ggplot(sales_daily, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
id_pairs <- data.table(productID = "G01F05S02S01", storeID = 3123)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
id_pairs <- data.table(productID = "G01F05S04S01", storeID = 3123)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
id_pairs <- data.table(productID = "G01F04S01S01", storeID = 3123)
id_pairs <- data.table(productID = "G01F02S01S01", storeID = 3123)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
id_pairs <- data.table(productID = "G01F03S01S01", storeID = 3123)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
id_pairs <- data.table(productID = "G02F05S01S01", storeID = 3123)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
sales[4056,]
id_pairs <- data.table(productID = "G13F03S01S04", storeID = 2784)
datatosmooth <- merge(id_pairs, sales, by = c("storeID", "productID"))
sales_daily <- data.table(date = seq(min(datatosmooth$date), max(datatosmooth$date)-1, by="days"),
quantity_sold_kg = as.numeric(NA))
for(i in 1:(nrow(datatosmooth)-1)){
sale_current <- datatosmooth[i,]
sale_next <- datatosmooth[i+1,]
period_length <- sale_next[,date] - sale_current[,date]
rows <- which(sales_daily[,date] >= sale_current[,date] & sales_daily[,date] < sale_next[,date])
for(r in seq_along(rows)){
set(sales_daily,
i=rows[r],
j=2L,
value=sale_current[,quantity_sold_kg]/as.numeric(period_length))
}
}
ggplot(datatosmooth, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
ggplot(sales_daily, aes(x=date, y=quantity_sold_kg)) +
geom_line() +
theme_bw()
events <- readRDS("events.RData")
product_store_timeline <- readRDS("product_store_timeline.RData")
library(data.table)
sales <- readRDS("sales.RData")
treatment_product <- "G19F03S02S01"
inspected_product <- "G01F01S01S01"
tables()
events[1:40, inspected_product]
relevant_events <- events[events$storeID==treatment_product &
events[, inspected_product], 1:4]
relevant_events <- events[events$storeID==treatment_product , 1:4]
relevant_events <- events[events$productID==treatment_product &
events[, inspected_product], 1:4]
introduction=TRUE
relevant_events <- events[events$productID==treatment_product & events$begin==introduction &
events[, inspected_product], 1:4]
product_store_timeline[productID==inspected_product, ]
a<- product_store_timeline[productID==inspected_product, ]
a<- product_store_timeline[productID==inspected_product & storeID %in% relevant_events$storeID, ]
a  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
relevant_product_store_timeline  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
relevant_events <- relevant_events[relevant_events$storeID %in% relevant_product_store_timeline[,storeID]]
relevant_events <- relevant_events[relevant_events$storeID %in% relevant_product_store_timeline[,storeID],]
rm(a)
relevant_product_store_timeline[, storeID] == relevant_events$storeID
relevant_product_store_timeline  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
table(relevant_events$storeID)
relevant_events$enoughdata <- NA
i=1
as.character(relevant_events$date[i])
days_window=14
datebefore.c <- as.character(relevant_events$date[i]-days_window)
dateafter.c <- as.character(relevant_events$date[i]+days_window-1)
relevant_events$date[i]-days_window
relevant_events$date[i]
relevant_events$date <- as.Date(relevant_events$date, "%Y%m%d")
relevant_events$date[i]-days_window
relevant_events$date[i]
as.character(relevant_events$date[i]-days_window)
relevant_events$date[i]
gsub("-", "", relevant_events$date[i])
gsub("-", "", relevant_events$date)
relevant_events$date
datebefore.c <- gsub("-", "", (relevant_events$date[i]-days_window))
dateafter.c <- gsub("-", "", (relevant_events$date[i]-days_window-1))
dateafter.c <- gsub("-", "", (relevant_events$date[i]+days_window-1))
relevant_product_store_timeline[,datebefore.c]
relevant_product_store_timeline[,dateafter.c]
relevant_product_store_timeline[,get(dateafter.c)]
for(i in 1:nrow(relevant_events)){
datebefore.c <- gsub("-", "", (relevant_events$date[i]-days_window))
dateafter.c <- gsub("-", "", (relevant_events$date[i]+days_window-1))
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)]
}
View(relevant_events)
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
View(relevant_events)
for(i in 1:nrow(relevant_events)){
datebefore.c <- gsub("-", "", (relevant_events$date[i]-days_window))
dateafter.c <- gsub("-", "", (relevant_events$date[i]+days_window-1))
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)]
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
i=20
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
i=45
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
View(relevant_events)
datebefore.c <- gsub("-", "", (relevant_events$date[i]-days_window))
dateafter.c <- gsub("-", "", (relevant_events$date[i]+days_window-1))
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
as.Date("2015-01-01")
relevant_events$date[i]-days_window > as.Date("2015-01-01")
relevant_events$date[i]
names(product_store_timeline)
relevant_events$date[i]-days_window > as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")
for(i in 1:nrow(relevant_events)){
datebefore.c <- gsub("-", "", (relevant_events$date[i]-days_window))
dateafter.c <- gsub("-", "", (relevant_events$date[i]+days_window-1))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window > as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
get(datebefore.c)
datebefore.c
get(datebefore.c)]
get(datebefore.c)
get(dateafter.c)
dateafter.c
relevant_product_store_timeline[,20150228]
relevant_product_store_timeline[,"20150228"]
relevant_product_store_timeline[,get(datebefore.c)]
for(i in 1:nrow(relevant_events)){
datebefore.c <- as.character(gsub("-", "", (relevant_events$date[i]-days_window)))
dateafter.c <- as.character(sub("-", "", (relevant_events$date[i]+days_window-1)))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window > as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
for(i in 1:nrow(relevant_events)){
datebefore.c <- as.character(gsub("-", "", (relevant_events$date[i]-days_window)))
dateafter.c <- as.character(gsub("-", "", (relevant_events$date[i]+days_window-1)))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window > as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
relevant_product_store_timeline[,get(dateafter.c)]
relevant_product_store_timeline[,get(datebefore.c)]
str(dateafter.c)
str(datebefore.c)
product_store_timeline[, 20150201 := 20150131]
product_store_timeline[, 20150131]
product_store_timeline[, get("20150131")]
product_store_timeline[, get("20150201") := get("20150131")]
product_store_timeline[, 20150201 := get("20150131")]
product_store_timeline[, as := get("20150131")]
product_store_timeline[, "asa" := get("20150131")]
product_store_timeline[, c("20150201") := get("20150131")]
product_store_timeline <- readRDS("product_store_timeline.RData")
product_store_timeline[, c("20150201") := get("20150131")]
names(product_store_timeline)
relevant_events <- events[events$productID==treatment_product & events$begin==introduction &
events[, inspected_product], 1:4]
relevant_events$date <- as.Date(relevant_events$date, "%Y%m%d")
relevant_events$enoughdata <- NA
relevant_product_store_timeline  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
#Was the inspected product available long enough before and after the event?
for(i in 1:nrow(relevant_events)){
datebefore.c <- as.character(gsub("-", "", (relevant_events$date[i]-days_window)))
dateafter.c <- as.character(gsub("-", "", (relevant_events$date[i]+days_window-1)))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window > as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
View(relevant_events)
relevant_events <- relevant_events[relevant_events$enoughdata,]
relevant_events$salesbefore <- NA
relevant_events$salesratio <- NA
relevant_events$salesafter <- NA
tables()
sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window,]
i=1
sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window,]
for(i in 1:nrow(relevant_events)){
relevant_events$salesbefore <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window, quantity_sold_kg])
relevant_events$salesafter <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date >= relevant_events$date[i] &
date < relevant_events$date[i]+days_window, quantity_sold_kg])
}
for(i in 1:nrow(relevant_events)){
relevant_events$salesbefore[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window, quantity_sold_kg])
relevant_events$salesafter[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date >= relevant_events$date[i] &
date < relevant_events$date[i]+days_window, quantity_sold_kg])
}
relevant_events$salesratio <- relevant_events$salesafter/relevant_events$salesbefore
hist(relevant_events$salesratio)
plot(density(relevant_events$salesratio))
cat("jhfk", \n)
cat("jhfk \n")
cat("jhfk")
cat("jhfk \n fk")
diffindiff <- function(treatment_product, inspected_product, days_window, introduction,
events, sales, product_store_timeline){
relevant_events <- events[events$productID==treatment_product & events$begin==introduction &
events[, inspected_product], 1:4]
cat("relevant events found\n")
relevant_events$date <- as.Date(relevant_events$date, "%Y%m%d")
relevant_events$enoughdata <- NA
relevant_product_store_timeline  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
#Was the inspected product available long enough before and after the event?
for(i in 1:nrow(relevant_events)){
cat(i)
datebefore.c <- as.character(gsub("-", "", (relevant_events$date[i]-days_window)))
dateafter.c <- as.character(gsub("-", "", (relevant_events$date[i]+days_window-1)))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window >= as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
cat("\nRelevant events with enough sales data found.\n")
relevant_events <- relevant_events[relevant_events$enoughdata,]
cat("Number of events:")
cat(nrow(relevant_events))
cat("\n")
relevant_events$salesafter <- NA
relevant_events$salesbefore <- NA
relevant_events$salesratio <- NA
for(i in 1:nrow(relevant_events)){
cat[i]
relevant_events$salesbefore[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window, quantity_sold_kg])
relevant_events$salesafter[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date >= relevant_events$date[i] &
date < relevant_events$date[i]+days_window, quantity_sold_kg])
}
relevant_events$salesratio <- relevant_events$salesafter/relevant_events$salesbefore
return(relevant_events)
}
head(events)
View(diffindiff)
did1a <-diffindiff("G01F04S12S01", "G01F01S01S01", 16, introduction = TRUE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did1b <-diffindiff("G01F04S12S01", "G01F01S01S01", 16, introduction = FALSE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
Q
did1a <-diffindiff("G01F04S12S01", "G01F01S01S01", 16, introduction = TRUE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did1b <-diffindiff("G01F04S12S01", "G01F01S01S01", 16, introduction = FALSE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did2a <-diffindiff("G19F03S02S01", "G01F01S01S01", 16, introduction = TRUE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did2b <-diffindiff("G19F03S02S01", "G01F01S01S01", 16, introduction = FALSE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
diffindiff <- function(treatment_product, inspected_product, days_window, introduction,
events, sales, product_store_timeline){
relevant_events <- events[events$productID==treatment_product & events$begin==introduction &
events[, inspected_product], 1:4]
cat("relevant events found\n")
relevant_events$date <- as.Date(relevant_events$date, "%Y%m%d")
relevant_events$enoughdata <- NA
relevant_product_store_timeline  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
#Was the inspected product available long enough before and after the event?
for(i in 1:nrow(relevant_events)){
cat(i)
datebefore.c <- as.character(gsub("-", "", (relevant_events$date[i]-days_window)))
dateafter.c <- as.character(gsub("-", "", (relevant_events$date[i]+days_window-1)))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window >= as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
cat("\nRelevant events with enough sales data found.\n")
relevant_events <- relevant_events[relevant_events$enoughdata,]
cat("Number of events:")
cat(nrow(relevant_events))
cat("\n")
relevant_events$salesafter <- NA
relevant_events$salesbefore <- NA
relevant_events$salesratio <- NA
for(i in 1:nrow(relevant_events)){
cat(i)
relevant_events$salesbefore[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window, quantity_sold_kg])
relevant_events$salesafter[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date >= relevant_events$date[i] &
date < relevant_events$date[i]+days_window, quantity_sold_kg])
}
relevant_events$salesratio <- relevant_events$salesafter/relevant_events$salesbefore
return(relevant_events)
}
diffindiff <- function(treatment_product, inspected_product, days_window, introduction,
events, sales, product_store_timeline){
relevant_events <- events[events$productID==treatment_product & events$begin==introduction &
events[, inspected_product], 1:4]
cat("relevant events found\n")
relevant_events$date <- as.Date(relevant_events$date, "%Y%m%d")
relevant_events$enoughdata <- NA
relevant_product_store_timeline  <- product_store_timeline[productID==inspected_product &
storeID %in% relevant_events$storeID,]
#Was the inspected product available long enough before and after the event?
for(i in 1:nrow(relevant_events)){
cat(i)
datebefore.c <- as.character(gsub("-", "", (relevant_events$date[i]-days_window)))
dateafter.c <- as.character(gsub("-", "", (relevant_events$date[i]+days_window-1)))
#check if the window is in the time period when we have data
if(relevant_events$date[i]-days_window >= as.Date("2015-01-01") & relevant_events$date[i]+days_window-1 < as.Date("2016-03-15")){
relevant_events$enoughdata[i] <- relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(dateafter.c)] &
relevant_product_store_timeline[storeID==relevant_events$storeID[i],get(datebefore.c)]
}
else{
relevant_events$enoughdata[i] <-FALSE
}
}
cat("\nRelevant events with enough sales data found.\n")
relevant_events <- relevant_events[relevant_events$enoughdata,]
cat("Number of events:")
cat(nrow(relevant_events))
cat("\n")
relevant_events$salesafter <- NA
relevant_events$salesbefore <- NA
relevant_events$salesratio <- NA
for(i in 1:nrow(relevant_events)){
cat(i)
relevant_events$salesbefore[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date < relevant_events$date[i] &
date >= relevant_events$date[i]-days_window, quantity_sold_kg])
relevant_events$salesafter[i] <- sum(sales[storeID == relevant_events$storeID[i] &
productID == inspected_product &
date >= relevant_events$date[i] &
date < relevant_events$date[i]+days_window, quantity_sold_kg])
}
relevant_events$salesratio <- relevant_events$salesafter/relevant_events$salesbefore
return(relevant_events)
}
did1a <-diffindiff("G01F04S12S01", "G01F01S01S01", 16, introduction = TRUE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did1b <-diffindiff("G01F04S12S01", "G01F01S01S01", 16, introduction = FALSE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did2a <-diffindiff("G19F03S02S01", "G01F01S01S01", 16, introduction = TRUE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did2b <-diffindiff("G19F03S02S01", "G01F01S01S01", 16, introduction = FALSE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did3a <-diffindiff("G19F03S02S02", "G01F01S01S01", 16, introduction = TRUE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
did3b <-diffindiff("G19F03S02S02", "G01F01S01S01", 16, introduction = FALSE,
events = events, sales = sales, product_store_timeline = product_store_timeline)
plot(density(did1a$salesratio))
plot(density(did1b$salesratio))
View(did1a)
plot(density(did1a$salesratio, na.rm=TRUE))
plot(density(did1b$salesratio, na.rm=TRUE))
plot(density(did2a$salesratio, na.rm=TRUE))
plot(density(did2b$salesratio, na.rm=TRUE))
plot(density(did3a$salesratio, na.rm=TRUE))
plot(density(did3b$salesratio, na.rm=TRUE))
median(did1a$salesratio)
median(did1a$salesratio, na.rm=TRUE)
median(did1b$salesratio, na.rm=TRUE)
median(did2a$salesratio, na.rm=TRUE)
median(did2b$salesratio, na.rm=TRUE)
median(did3a$salesratio, na.rm=TRUE)
median(did3b$salesratio, na.rm=TRUE)
View(did2a)
saveRDS(did3b, "did3b.RData")
saveRDS(did1a, "did1a.RData")
saveRDS(did1b, "did1b.RData")
saveRDS(did2a, "did2a.RData")
saveRDS(did2b, "did2b.RData")
saveRDS(did3a, "did3a.RData")
